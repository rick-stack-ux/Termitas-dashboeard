<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Panel sondas T</title>

<style>
    body{
        font-family: Arial;
        background:#f0f3f7;
        padding:20px;
    }

    h1{
        font-size:28px;
        margin-bottom:20px;
    }

    .grid{
        display:grid;
        grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
        gap:18px;
    }

    .card{
        background:white;
        padding:20px;
        border-radius:14px;
        box-shadow:0 4px 12px rgba(0,0,0,.15);
        border:4px solid transparent;
        transition:0.3s;
    }

    .alerta{
        border-color:red!important;
    }

    .chart{
        height:120px;
        display:flex;
        align-items:flex-end;
        justify-content:center;
        gap:1px;
    }

    .barTemp{
        width:14px;
        border-radius:4px;
        transition:0.5s;
    }
    .barHum{
        width:14px;
        background:#4DB6FF;
        border-radius:4px;
    }

    .label{
        text-align:center;
        margin-top:8px;
        font-size:14px;
        font-weight:bold;
    }
</style>

</head>
<body>

<h1>Panel sondas T</h1>

<div class="grid" id="grid"></div>


<script>
//////////////////////////////////////////////////////////////////////////////////
// CONFIGURACIÓN
//////////////////////////////////////////////////////////////////////////////////
const limiteMin = 10;   // mm
const limiteOk  = 40;   // mm  (hasta aquí OK)
const limiteAlarma = 40;// >40mm alerta
//////////////////////////////////////////////////////////////////////////////////

const sondas = [
    {id:1, temp:22, hum:55, distancia:15},
    {id:2, temp:24, hum:57, distancia:20},
    {id:3, temp:26, hum:60, distancia:38},
    {id:4, temp:23, hum:58, distancia:45}, // alarma
    {id:5, temp:25, hum:52, distancia:48}  // alarma
]

// temperatura color degradado
function colorTemp(t){
    if(t<22) return "#22dd22";
    if(t<26) return "orange";
    return "red";
}

function draw(){
    const g=document.getElementById("grid");
    g.innerHTML="";

    sondas.forEach(s=>{
        let card=document.createElement("div");
        card.className="card";
        
        // alerta distancia
        if(s.distancia>limiteAlarma){
            card.classList.add("alerta");
        }

        card.innerHTML=`
            <h3>Sonda ${s.id}</h3>

            <div style="display:flex;gap:8px; margin-top:12px;">
                <div>
                    <div class="chart" id="temp${s.id}"></div>
                    <div class="label">Temp: ${s.temp}°C</div>
                </div>
                <div>
                    <div class="chart" id="hum${s.id}"></div>
                    <div class="label">Hum: ${s.hum}%</div>
                </div>
            </div>

            <div style="margin-top:15px;font-size:14px;">
              Distancia: <b>${s.distancia} mm</b>
            </div>
        `;

        g.appendChild(card);

        drawTemp("temp"+s.id, s.temp );
        drawHum("hum"+s.id, s.hum );
    })
}

function drawTemp(id,val){
    let cont=document.getElementById(id);
    cont.innerHTML="";
    for(let i=0;i<10;i++){
        let b=document.createElement("div");
        b.className="barTemp";
        b.style.height= (i<val/3?"100%":"10px");
        b.style.background=colorTemp(val);
        cont.appendChild(b);
    }
}

function drawHum(id,val){
    let cont=document.getElementById(id);
    cont.innerHTML="";
    for(let i=0;i<10;i++){
        let b=document.createElement("div");
        b.className="barHum";
        b.style.height= (i<val/10?"100%":"10px");
        cont.appendChild(b);
    }
}

draw();
</script>

</body>
</html>
